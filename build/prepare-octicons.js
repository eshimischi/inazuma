const octicons = require("@primer/octicons");
const HandleBars = require("handlebars");
const fs = require("fs");
const iconnames = [
  "diff-added",
  "diff-ignored",
  "diff-modified",
  "diff-removed",
  "diff-renamed"
];

const paths = iconnames.reduce((prev, cur) => {
  prev.push({ name: cur, path: octicons[cur].path });
  return prev;
}, []);

const templateSource = `// Generated by build/prepare-octicons.js

/* eslint react/self-closing-comp: 0 */
/* prettier-ignore */
export const paths = {
{{#each paths}}
  "{{{name}}}": () => (
    {{{path}}}
  ){{#unless @last}},{{/unless}}
{{/each}}
};
`;

const template = HandleBars.compile(templateSource);
fs.writeFileSync(
  "src/renderer/view/components/base/__octicon.tsx",
  template({ paths })
);
