const mdi = require("@mdi/js");
const HandleBars = require("handlebars");
const fs = require("fs");
const iconnames = [
  "AlertCircle",
  "ArrowSplitVertical",
  "ChevronDown",
  "ChevronLeft",
  "ChevronUp",
  "ClockOutline",
  "Close",
  "Cloud",
  "CodeTags",
  "Cog",
  "CompareHorizontal",
  "Console",
  "DotsVertical",
  "Face",
  "Filter",
  "History",
  "Home",
  "Information",
  "InformationOutline",
  "Magnify",
  "Menu",
  "MenuDown",
  "Reload",
  "SimOff",
  "Tag",
];

const paths = iconnames.reduce((prev, cur) => {
  const path = mdi["mdi" + cur];
  if (path === undefined) {
    console.error("unknown icon:" + cur);
    process.exit(1);
  }
  prev.push({ name: cur, path });
  return prev;
}, []);

const templateSource = `// Generated by build/prepare-mdi.js

/* eslint react/self-closing-comp: 0 */
/* prettier-ignore */
export const paths = {
{{#each paths}}
  {{{name}}}: "{{{path}}}"{{#unless @last}},{{/unless}}
{{/each}}
};
`;

const template = HandleBars.compile(templateSource);
fs.writeFileSync(
  "src/renderer/view/components/base/__mdi.ts",
  template({ paths })
);
